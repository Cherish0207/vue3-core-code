## 搭建 menorepo

> 实现对 es6 语法、ts、项目特定的编译.尽可能还原 vue3 对多个模块的构建方式

```bash
# 采用 menorepo 的方式，目前只有 yarn 支持
yarn init -y
yarn add typescript rollup rollup-plugin-typescript2 @rollup/plugin-node-resolve @rollup/plugin-json execa -D
# execa 同时打包多个项目，是 node 的子进程
# p.s. —ignore-workspace-root-check 给根模块安装而不是子模块
```

### `package.json`

#### 根`package.json`

> 根`package.json`的作用是维护多个包的，
> 是个私有包:`private:true`，
> 指定工作空间:`workspace:["packages/*"]`,所有包都管理到 packages 目录下

#### 子`package.json`

> 每个子模块需要遵循一定机制:

```js
"main": "index.js", // node commonjs
"module": "dist/reactivity.esm-bundle.js",// import '@vue/reactivity' --> 找dist/reactivity.esm-bundle.js文件
"buildOptions":{
  "name":"VueReactivity",// 给全局的包起名 <script src=".../dist/reactivity.esm-bundle.js"></script>引入后可以使用VueReactivity变量
  // 配置当前模块支持 node、es6、全局模块
  "formats":[
    "cjs",
    "esm-bundler",
    "global"
  ]
}
```
